(this["webpackJsonpslack-music-bot-client"]=this["webpackJsonpslack-music-bot-client"]||[]).push([[0],{84:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),s=n(27),r=n.n(s),i=n(2),o=n(37),l=n(0),u=function(e){var t=e.className,n=void 0===t?"":t,a=e.children,c=e.id,s=Object(o.a)(e,["className","children","id"]);return Object(l.jsxs)("div",{className:"form-check form-switch",children:[Object(l.jsx)("input",Object(i.a)(Object(i.a)({type:"checkbox",className:"form-check-input ".concat(n)},s),{},{id:c})),Object(l.jsx)("label",{className:"form-check-label text-light",htmlFor:c,children:a})]})},d=function(){return Object(l.jsx)("nav",{className:"navbar fixed-top navbar-expand-lg navbar-dark bg-dark",children:Object(l.jsxs)("div",{className:"container-fluid",children:[Object(l.jsx)("a",{className:"navbar-brand",href:"/",children:"Innovate Playlist"}),Object(l.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(l.jsx)("span",{className:"navbar-toggler-icon"})}),Object(l.jsx)("div",{className:"collapse navbar-collapse",id:"navbarText",children:Object(l.jsx)("form",{className:"d-flex ms-auto",children:Object(l.jsx)(u,{disabled:!0,children:"Sangai Sunam (Coming Soon)"})})})]})})},b=n(8),j=n.n(b),f=n(11),O=n(34),x=n(6),g=n(28),v=n.n(g),m=n(29),h=n(30),p=n(13),N=n(31),k=n(35),w=n(36),y={baseUrl:"https://47b6b590bd2b.ngrok.io",webSocketUrl:"wss://47b6b590bd2b.ngrok.io/ws"},S=n(32),C=n.n(S),E=function(e){Object(N.a)(n,e);var t=Object(k.a)(n);function n(e,a,c,s){var r;return Object(m.a)(this,n),(r=t.call(this,a)).statusCode=void 0,r.details=void 0,r.axiosError=void 0,r.statusCode=e,r.details=c,r.axiosError=s,Object.setPrototypeOf(Object(p.a)(r),n.prototype),r}return Object(h.a)(n,[{key:"serializeErrors",value:function(){return[{message:this.message,status:this.statusCode,details:this.details}]}}]),n}(Object(w.a)(Error)),P=C.a.create({baseURL:y.baseUrl});P.interceptors.response.use((function(e){return e}),(function(e){if(e.response)throw new E(e.response.status,e.response.data.message,e.response.data,e.response);if(e.request)throw new E(500,"No Response",{},e.request);throw new E(500,e.message,{message:"Setting error"},{})}));var R=function(){var e=Object(f.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.request(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=n(33),T=n.n(F),_={socketConnected:!1,socketId:""},I=Object(a.createContext)(_),U=function(e){var t=e.children,n=function(e){var t=Object(a.useRef)(),n=Object(a.useRef)(new T.a),c=Object(a.useState)(""),s=Object(x.a)(c,2),r=s[0],i=s[1],o=Object(a.useState)(!1),l=Object(x.a)(o,2),u=l[0],d=l[1];return Object(a.useEffect)((function(){var a=new WebSocket(e);t.current=a,a&&(a.onopen=function(){d(!0)},a.onclose=function(){i(""),d(!1)},a.onmessage=function(e){var t,a=JSON.parse(e.data),c=a.message,s=a.event_type;"welcome"===s&&i(c),null===(t=n.current)||void 0===t||t.emit(s,c),console.log("Received: "+e.data)})}),[e]),Object(a.useEffect)((function(){return function(){t.current&&t.current.close(),n.current&&n.current.removeAllListeners()}}),[]),{socketRef:t,emitterRef:n,socketConnected:u,socketId:r}}(e.url||"");return Object(l.jsx)(I.Provider,{value:n,children:t})},L=function(e){var t=e.title,n=e.className,a=void 0===n?"":n;return Object(l.jsx)("span",{className:"badge mt-1 me-2 ".concat(a),children:t})},J=function(e){var t=e.song,n=e.onClick,a=e.isCurrent,c=e.playing,s=e.progress,r=e.isNextSong,i=e.duration,o=e.className;return Object(l.jsxs)("li",{onClick:n,className:"list-group-item p-0 text-white px-5 py-2 mb-2 ".concat(o||""),style:{cursor:"pointer"},children:[Object(l.jsxs)("div",{className:" d-flex",children:[Object(l.jsx)("div",{className:"flex-shrink-0 d-flex",style:{width:"20%"},children:Object(l.jsx)("div",{className:"align-self-center",children:Object(l.jsx)("img",{src:t.thumbnail_url,className:"img-fluid",alt:t.title})})}),Object(l.jsxs)("div",{className:"flex-grow-1 py-2 px-3",children:[Object(l.jsx)("p",{className:"mb-1",children:t.title||t.url}),Object(l.jsx)("p",{className:"text-muted",children:t.description}),Object(l.jsxs)("div",{className:"d-flex",children:[a&&c&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(L,{className:"align-self-center bg-success",title:"Playing"}),Object(l.jsx)(L,{className:"align-self-center bg-light text-dark",title:"".concat(s," %")})]}),a&&!c&&Object(l.jsx)(L,{className:"align-self-center bg-danger",title:"Paused"}),r&&Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(L,{className:"align-self-center bg-warning text-dark",title:"Up Next"})})]})]})]}),a&&Object(l.jsx)("div",{className:"progress bg-dark mt-2",style:{height:"4px"},children:Object(l.jsx)("div",{className:"progress-bar bg-danger",role:"progressbar",style:{width:"".concat(s,"%")},"aria-valuenow":s,"aria-valuemin":0,"aria-valuemax":i})})]})},$=function(e){var t=e.children;return Object(l.jsx)("div",{className:"video-player",children:t})},q=function(){var e=Object(a.useContext)(I),t=e.socketConnected,n=e.socketId,c=e.socketRef,s=e.emitterRef,r=Object(a.useState)([]),o=Object(x.a)(r,2),u=o[0],d=o[1],b=Object(a.useState)(!1),g=Object(x.a)(b,2),m=g[0],h=g[1],p=Object(a.useState)({_id:{$oid:""},user:"",url:"",thumbnail_url:"",status:"pending",title:"",description:"",index:0}),N=Object(x.a)(p,2),k=N[0],w=N[1],y=Object(a.useCallback)((function(e){d([].concat(Object(O.a)(u),[e]))}),[u]);Object(a.useEffect)((function(){var e=null===c||void 0===c?void 0:c.current,a=null===s||void 0===s?void 0:s.current,r=function(e){var t=JSON.parse(e);y(t)};return t&&e&&n&&a&&(console.log("all done"),a.on("newSong",r)),function(){console.log("Clear"),null===a||void 0===a||a.removeListener("newSong",r)}}),[n,t,c,s,y]),Object(a.useEffect)((function(){(function(){var e=Object(f.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R({method:"GET",url:"/playlist"});case 3:t=e.sent,d(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.useEffect)((function(){!u.length||m||k.url||w(Object(i.a)(Object(i.a)(Object(i.a)({},k),u[0]),{},{index:0}))}),[u,m,k]);var S=k.playedSeconds,C=k.duration,E=S&&C?Math.round(S/C*100):0;return Object(l.jsxs)("div",{className:"overflow-hidden d-flex bg-dark",children:[Object(l.jsx)("div",{className:"flex-grow-1 col max-height",children:Object(l.jsx)(v.a,{url:k.url,playing:m,controls:!0,onStart:function(){h(!0)},onPlay:function(){h(!0)},onPause:function(){h(!1)},pip:!0,onProgress:function(e){var t=e.playedSeconds;w(Object(i.a)(Object(i.a)({},k),{},{playedSeconds:t}))},onDuration:function(e){w(Object(i.a)(Object(i.a)({},k),{},{duration:e}))},onEnded:function(){if(u.length){var e=k.index+1;e===u.length?w(Object(i.a)(Object(i.a)({},u[0]),{},{index:0})):w(Object(i.a)(Object(i.a)({},u[e]),{},{index:e}))}},width:"100%",wrapper:$})}),Object(l.jsx)("div",{className:"flex-shrink-0 col-sm-4 overflow-auto max-height",children:Object(l.jsx)("ul",{className:"list-group list-group-flush",children:u.map((function(e,t){var n,a,c,s=(null===(n=k._id)||void 0===n?void 0:n.$oid)===(null===(a=e._id)||void 0===a?void 0:a.$oid),r=k.index+1,o=r===u.length?0:r;return Object(l.jsx)(J,{className:"".concat(s?"bg-black":"bg-dark"),onClick:function(n){n.preventDefault(),s||(w(Object(i.a)(Object(i.a)({},e),{},{index:t})),h(!0))},song:e,isCurrent:s,playing:m,isNextSong:o===t,duration:C||0,progress:E},null===(c=e._id)||void 0===c?void 0:c.$oid)}))})})]})};var D=function(){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(d,{}),Object(l.jsx)(q,{})]})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,86)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),s(e),r(e)}))};n(84);r.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(U,{url:y.webSocketUrl,children:Object(l.jsx)(D,{})})}),document.getElementById("root")),B()}},[[85,1,2]]]);
//# sourceMappingURL=main.e77610a5.chunk.js.map