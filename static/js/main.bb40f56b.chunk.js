(this["webpackJsonpslack-music-bot-client"]=this["webpackJsonpslack-music-bot-client"]||[]).push([[0],{84:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),s=n(27),r=n.n(s),i=n(2),l=n(37),o=n(0),d=function(e){var t=e.className,n=void 0===t?"":t,a=e.children,c=e.id,s=Object(l.a)(e,["className","children","id"]);return Object(o.jsxs)("div",{className:"form-check form-switch",children:[Object(o.jsx)("input",Object(i.a)(Object(i.a)({type:"checkbox",className:"form-check-input ".concat(n)},s),{},{id:c})),Object(o.jsx)("label",{className:"form-check-label text-light",htmlFor:c,children:a})]})},u=function(){return Object(o.jsx)("nav",{className:"navbar fixed-top navbar-expand-lg navbar-dark bg-dark",children:Object(o.jsxs)("div",{className:"container-fluid",children:[Object(o.jsx)("a",{className:"navbar-brand",href:"/",children:"Innovate Playlist"}),Object(o.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(o.jsx)("span",{className:"navbar-toggler-icon"})}),Object(o.jsx)("div",{className:"collapse navbar-collapse",id:"navbarText",children:Object(o.jsx)("form",{className:"d-flex ms-auto",children:Object(o.jsx)(d,{disabled:!0,children:"Sangai Sunam (Coming Soon)"})})})]})})},b=n(8),j=n.n(b),f=n(11),O=n(34),x=n(6),g=n(28),h=n.n(g),v=n(29),m=n(30),p=n(13),N=n(31),k=n(35),w=n(36),y={baseUrl:"https://47b6b590bd2b.ngrok.io",webSocketUrl:"wss://47b6b590bd2b.ngrok.io/ws"},S=n(32),C=n.n(S),E=function(e){Object(N.a)(n,e);var t=Object(k.a)(n);function n(e,a,c,s){var r;return Object(v.a)(this,n),(r=t.call(this,a)).statusCode=void 0,r.details=void 0,r.axiosError=void 0,r.statusCode=e,r.details=c,r.axiosError=s,Object.setPrototypeOf(Object(p.a)(r),n.prototype),r}return Object(m.a)(n,[{key:"serializeErrors",value:function(){return[{message:this.message,status:this.statusCode,details:this.details}]}}]),n}(Object(w.a)(Error)),P=C.a.create({baseURL:y.baseUrl});P.interceptors.response.use((function(e){return e}),(function(e){if(e.response)throw new E(e.response.status,e.response.data.message,e.response.data,e.response);if(e.request)throw new E(500,"No Response",{},e.request);throw new E(500,e.message,{message:"Setting error"},{})}));var R=function(){var e=Object(f.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.request(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=n(33),T=n.n(F),_={socketConnected:!1,socketId:""},I=Object(a.createContext)(_),L=function(e){var t=e.children,n=function(e){var t=Object(a.useRef)(),n=Object(a.useRef)(new T.a),c=Object(a.useState)(""),s=Object(x.a)(c,2),r=s[0],i=s[1],l=Object(a.useState)(!1),o=Object(x.a)(l,2),d=o[0],u=o[1];return Object(a.useEffect)((function(){var a=new WebSocket(e);t.current=a,a&&(a.onopen=function(){u(!0)},a.onclose=function(){i(""),u(!1)},a.onmessage=function(e){var t,a=JSON.parse(e.data),c=a.message,s=a.event_type;"welcome"===s&&i(c),null===(t=n.current)||void 0===t||t.emit(s,c),console.log("Received: "+e.data)})}),[e]),Object(a.useEffect)((function(){return function(){t.current&&t.current.close(),n.current&&n.current.removeAllListeners()}}),[]),{socketRef:t,emitterRef:n,socketConnected:d,socketId:r}}(e.url||"");return Object(o.jsx)(I.Provider,{value:n,children:t})},U=function(e){var t=e.title,n=e.className,a=void 0===n?"":n;return Object(o.jsx)("span",{className:"badge mt-1 me-2 ".concat(a),children:t})},J=function(e){var t=e.song,n=e.onClick,a=e.isCurrent,c=e.playing,s=e.progress,r=e.isNextSong,i=e.duration,l=e.className;return Object(o.jsxs)("li",{onClick:n,className:"list-group-item p-0 text-white px-5 py-2 mb-2 ".concat(l||""),style:{cursor:"pointer"},children:[Object(o.jsxs)("div",{className:" d-flex",children:[Object(o.jsx)("div",{className:"flex-shrink-0 d-flex",style:{width:"20%"},children:Object(o.jsx)("div",{className:"align-self-center",children:Object(o.jsx)("img",{src:t.thumbnail_url,className:"img-fluid",alt:t.title})})}),Object(o.jsxs)("div",{className:"flex-grow-1 py-2 px-3",children:[Object(o.jsx)("p",{className:"mb-1",children:t.title||t.url}),Object(o.jsx)("p",{className:"text-muted",children:t.description}),Object(o.jsxs)("div",{className:"d-flex",children:[a&&c&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(U,{className:"align-self-center bg-success",title:"Playing"}),Object(o.jsx)(U,{className:"align-self-center bg-light text-dark",title:"".concat(s," %")})]}),a&&!c&&Object(o.jsx)(U,{className:"align-self-center bg-danger",title:"Paused"}),r&&Object(o.jsx)(o.Fragment,{children:Object(o.jsx)(U,{className:"align-self-center bg-warning text-dark",title:"Up Next"})})]})]})]}),a&&Object(o.jsx)("div",{className:"progress bg-dark mt-2",style:{height:"4px"},children:Object(o.jsx)("div",{className:"progress-bar bg-danger",role:"progressbar",style:{width:"".concat(s,"%")},"aria-valuenow":s,"aria-valuemin":0,"aria-valuemax":i})})]})},$=function(){return Object(o.jsx)("div",{className:"spinner-border text-light",role:"status",children:Object(o.jsx)("span",{className:"visually-hidden",children:"Loading..."})})},q=function(e){var t=e.children;return Object(o.jsx)("div",{className:"video-player",children:t})},D=function(){var e=Object(a.useContext)(I),t=e.socketConnected,n=e.socketId,c=e.socketRef,s=e.emitterRef,r=Object(a.useState)([]),l=Object(x.a)(r,2),d=l[0],u=l[1],b=Object(a.useState)(!1),g=Object(x.a)(b,2),v=g[0],m=g[1],p=Object(a.useState)(!1),N=Object(x.a)(p,2),k=N[0],w=N[1],y=Object(a.useState)({_id:{$oid:""},user:"",url:"",thumbnail_url:"",status:"pending",title:"",description:"",index:0}),S=Object(x.a)(y,2),C=S[0],E=S[1],P=Object(a.useCallback)((function(e){u([].concat(Object(O.a)(d),[e]))}),[d]);Object(a.useEffect)((function(){var e=null===c||void 0===c?void 0:c.current,a=null===s||void 0===s?void 0:s.current,r=function(e){var t=JSON.parse(e);P(t)};return t&&e&&n&&a&&(console.log("all done"),a.on("newSong",r)),function(){console.log("Clear"),null===a||void 0===a||a.removeListener("newSong",r)}}),[n,t,c,s,P]),Object(a.useEffect)((function(){(function(){var e=Object(f.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(!0),e.next=4,R({method:"GET",url:"/playlist"});case 4:t=e.sent,u(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:return e.prev=11,w(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.useEffect)((function(){!d.length||v||C.url||E(Object(i.a)(Object(i.a)(Object(i.a)({},C),d[0]),{},{index:0}))}),[d,v,C]);var F=C.playedSeconds,T=C.duration,_=F&&T?Math.round(F/T*100):0;return k?Object(o.jsx)("div",{className:"max-height bg-dark d-flex align-items-center justify-content-center w-full",children:Object(o.jsx)($,{})}):Object(o.jsxs)("div",{className:"overflow-hidden d-flex bg-dark",children:[Object(o.jsx)("div",{className:"flex-grow-1 col max-height",children:Object(o.jsx)(h.a,{url:C.url,playing:v,controls:!0,onStart:function(){m(!0)},onPlay:function(){m(!0)},onPause:function(){m(!1)},pip:!0,onProgress:function(e){var t=e.playedSeconds;E(Object(i.a)(Object(i.a)({},C),{},{playedSeconds:t}))},onDuration:function(e){E(Object(i.a)(Object(i.a)({},C),{},{duration:e}))},onEnded:function(){if(d.length){var e=C.index+1;e===d.length?E(Object(i.a)(Object(i.a)({},d[0]),{},{index:0})):E(Object(i.a)(Object(i.a)({},d[e]),{},{index:e}))}},width:"100%",wrapper:q})}),Object(o.jsx)("div",{className:"flex-shrink-0 col-sm-4 overflow-auto max-height",children:Object(o.jsx)("ul",{className:"list-group list-group-flush",children:d.map((function(e,t){var n,a,c,s=(null===(n=C._id)||void 0===n?void 0:n.$oid)===(null===(a=e._id)||void 0===a?void 0:a.$oid),r=C.index+1,l=r===d.length?0:r;return Object(o.jsx)(J,{className:"".concat(s?"bg-black":"bg-dark"),onClick:function(n){n.preventDefault(),s||(E(Object(i.a)(Object(i.a)({},e),{},{index:t})),m(!0))},song:e,isCurrent:s,playing:v,isNextSong:l===t,duration:T||0,progress:_},null===(c=e._id)||void 0===c?void 0:c.$oid)}))})})]})};var B=function(){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(u,{}),Object(o.jsx)(D,{})]})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,86)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),s(e),r(e)}))};n(84);r.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(L,{url:y.webSocketUrl,children:Object(o.jsx)(B,{})})}),document.getElementById("root")),M()}},[[85,1,2]]]);
//# sourceMappingURL=main.bb40f56b.chunk.js.map